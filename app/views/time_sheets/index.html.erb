<div class="row">
  <div class="col-2">
    <form action="time_sheets" class="form-horizontal" method="get">
      <div class="input-group">
        <input class="form-control" type="month" id="start" name="year_month" min="2018-03" value="<%= current_select_month %>" onchange="this.form.submit();">
      </div>
    </form>
  </div>
  <% time_sheet = @data[:time_sheet]  %>
  <% result = @data[:result] %>
  <div>
    <% keeping_type = time_sheet.keeping_type %>
    <%= form_with(model: time_sheet, html: { class: "form-horizontal mr-2" }) do |form| %>
      <%= form.hidden_field :keeping_type, value: keeping_type  %>
      <div class="row">
        <%= form.submit keeping_type.humanize, class: "btn btn-#{keeping_type.eql?("check_out") ? 'danger' : 'success'} waves-effect waves-light ml-4", disabled: @data[:disabled] %>
      </div>
    <% end %>
  </div>
</div>

<div class="row">
  <div class="col-sm-10">
    <div class="row mt-3" style="height: 30px">
      <% Date::DAYNAMES.each do |day_name| %>
        <div class="col border text-center font-weight-bold">
          <%= day_name %>
        </div>
      <% end %>
    </div>
    <% time_late = 0 %>
    <% (result.count / 7).times do |row| %>
      <div class="row"  style="height: 120px">
        <% 7.times do |day| %>
          <div class="col border">
            <% this_day =  result[row * 7 + day]%>
            <% if this_day.class == Hash %>
              <span class="font-weight-bold h6" ><%= this_day[:day] if this_day[:current_month] %></span>
            <% else %>
              <span class="font-weight-bold h6"><%= this_day.first[:day] %><span>
              </br>
              <% this_day.each do |check| %>
                <span class="btn-<%= check[:type].eql?("check_in") ? 'success' : 'danger' %> rounded-pill text-center" style="display: inline-block; width: 31%;font-size: 15px !important;"><%= check[:time] %></span>
                <% time_late += check[:time_late].to_i %>
              <% end %>
              <% if time_late != 0 %>
                <span class="btn-warning rounded-pill text-center" style="display: inline-block; width: 31%;font-size: 15px !important;"><%= time_late_strftime(time_late) %></span>
                <% time_late = 0 %>
              <% end %>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
  <div class="ml-4 mt-3">
    <b><h5>Note:</h5></b>
    <h5>- Present: 6</h5>
    <h5>- Present: 6</h5>
    <h5>- Present: 6</h5>
    <h5>- Present: 6</h5>
    <h5>- Present: 6</h5>
    <h5>- Present: 6</h5>
    <h5>- Present: 6</h5>
  </div>
</div>